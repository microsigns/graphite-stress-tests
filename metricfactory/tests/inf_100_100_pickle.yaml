# this test scenario will send infinite batches of 100 sets of 100 metrics
# (10000 unique metrics in repeated batches) and will pickle and send them over
# the wire every 256 metrics. 

---
modules:

  hammer:
    module: metricfactory.test.hammer
    arguments:
      batch: 0
      batch_size: 100
      set_size: 100
      value: 1000

  bucket:
    module: wishbone.builtin.flow.tippingbucket
    arguments:
      events: 256

  encodegraphite:
    module: wishbone.builtin.metrics.graphite
    arguments:
      pickle: True

  tcp:
    module: wishbone.output.tcp
    arguments:
      #host: THE GRAPHITE SERVER'S IP GOES HERE
      host: localhost
      port: 2004

  stdout:
    module: wishbone.builtin.output.stdout

routingtable:
  - hammer.outbox             -> bucket.inbox
  - bucket.outbox             -> encodegraphite.inbox
  - encodegraphite.outbox     -> tcp.inbox
...
